## Pergunta

25 - Cria uma nova solução em Visual Studio com as seguintes classes:

* Classe abstrata `Character` com:
  * Propriedade _read-only_ `Name` do tipo `string`
  * Método `Move()` abstrato, que retorna um `char` indicando a direção seguida
    (`'N'`, `'S'`, `'W'` ou `'E'`)
* Classe `NPC`, estende `Character`, com:
  * Método `Move()` sobreposto que retorna direção aleatória
* Classe `Player`, estende `Character`, com:
  * Método `Move()` sobreposto que retorna direção após solicitar a mesma ao
    jogador através das teclas *W*, *S*, *A* e *D*
* Classe `Program` com método `Main()` para testar as classes anteriores

## Soluções

### Solução 1

Classe abstrata `Character`:

```cs
public abstract class Character
{
    // Read-Only property for the Character's name
    public string Name { get; }

    public Character(string name)
    {
        Name = name;
    }

    // Abstract method for the character's movement that returns a char 
    // (direction) that can be N, S, W, E
    public abstract char Move();
}
```

Classe `NPC` que estende `Character`:

```cs
using System;

public class NPC : Character
{
    // Declarar variáveis
    private Random rnd;
    // string apenas de leitura que contém os carácteres das direções
    private readonly string directions;

    // Construtor da classe NPC, que usa a base de name da classe 
    // abstrata Character
    public NPC(string name) : base(name)
    {
        rnd = new Random();
        directions = "NSWE";
    }

    // Override do método abstrato Move() da classe abstrata Character,
    // determina aleatoriamente através do Random rnd declarado o carácter
    // da string directions a ser usado para determinar a direção do
    // movimento do NPC
    public override char Move() => directions[rnd.Next(directions.Length)];
}
```

Classe `Player` que estende `Character`::

```cs
using System;

public class Player : Character
{
    // Construtor da classe Player, que usa a base de name da classe 
    // abstrata Character
    public Player(string name) : base(name) { }

    // Override do método abstrato Move() da classe abstrata Character,
    // pede ao jogador um input (WASD) e retorna um char que representa
    // a direção do jogador
    public override char Move()
    {
        // Delcarar variáveis
        char mInput;

        // Pedir input ao jogador (WASD)
        Console.WriteLine("What direction will you move in?\n" +
            "(W - North, A - West, S - South, D - East\n");

        // Guardar o input do jogador na variável mInput, para ser usada
        // na determinação da direção do movimento
        mInput = Console.ReadLine().ToUpper()[0];

        // Switch case que determina o char devolvido pela função de acordo
        // com o input do jogador
        switch (mInput)
        {
            case 'W': return 'N';
            case 'A': return 'W';
            case 'S': return 'S';
            case 'D': return 'E';
            default: return '?';
        }
    }

    // Override do método ToString() para imprimir o nome dado à instância
    // da Classe Player através do construtor
    public override string ToString() => $"Player Name: {Name}";
}
```

Classe `Program` com método `Main`que testa as classes anteriores:

```cs
using System;

class Program
{
    static void Main(string[] args)
    {
        // Declarar Variáveis
        // Declarar variável loop como true
        bool loop = true;
        // Instanciar p1 como uma instância da classe Player, guardado numa
        // variável de classe Player
        Player p1 = new Player("Archibald Longpants");
        // Instanciar npc como uma instância da classe NPC, guardado numa
        // variável de classe NPC
        NPC npc1 = new NPC("Bongitard Archlong");

        // Imprime o retorno override do método ToString() da classe 
        // Player, que imprime o nome dado à instância p1
        Console.WriteLine($"{p1}\n");

        // while loop que pede e imprime as direções do jogador e npc
        // retornadas pelas suas funções de movimento
        while (loop)
        {
            Console.WriteLine($"Player Move Direction: {p1.Move()}");
            Console.WriteLine($"NPC Move Direction: {npc1.Move()}");
        }
    }
}
```


**Nota:** Código de teste para este exercício encontra-se neste
[repositório](https://github.com/PmaiWoW/GitHub-Exercises).

*Por [Pedro Inácio](https://github.com/PmaiWoW).*





### Solução 2

Enum `Directions`

```cs
namespace Exercicio25
{
    public enum  Directions
    {
        North = 'N',
        East = 'E',
        West = 'W',
        South = 'S'
    }
}
```

Classe `Character`

```cs
namespace Exercicio25
{
    abstract class Character
    {
        // Declare instance variables
        public Directions Directions;

        // Read-only name property
        public string Name { get; }

        // Constructor to store name
        public Character(string name)
        {
            Name = name;
        }

        // Character movement to be overridden by derived classes
        public abstract char Move();

        // Method to get direction from enum
        public char GetDirection(int a)
        {
            switch(a)
            {
                case 0:
                    return (char) Directions.North;
                case 1:
                    return (char)Directions.East;
                case 2:
                    return (char)Directions.West;
                case 3:
                    return (char)Directions.South;
                default:
                    return '#';
            }
        }
    }
}
```

Classe `NPC`

```cs
using System;

namespace Exercicio25
{
    public class NPC : Character
    {
        // Declare instance variables
        private Random rnd;

        // Property to store direction and show it afterwards
        public char Direct { get; private set; }

        // Constructor do get name
        public NPC(string name) : base(name)
        {
            rnd = new Random();
        }

        // NPC movement
        public override char Move()
        {
            // Declare block variables
            int drndNumber = rnd.Next(4);

            // Store direction
            Direct = GetDirection(drndNumber);

            // Return random direction
            return Direct;
        }
    }
}
```

Classe `Player`

```cs
using System;

namespace Exercicio25
{
    public class Player : Character
    {
        // Properties to...
        // ...Store player choice in case of wrong input
        public string PChoice { get; private set; }
        //...and store direction and show it afterwards
        public char Direct { get; private set; }

        // Constructor
        public Player(string name) : base(name)
        {
        }

        // Player movement
        public override char Move()
        {
            //Ask for direction
            Console.Write("Select desired direction: ");

            // Store choice and turns it upper case
            PChoice = Console.ReadLine();
            PChoice = PChoice.ToUpper();

            // Checks if input is correct
            if (PChoice == "1" || PChoice == "2" ||
                   PChoice == "3" || PChoice == "4")
            {
                // Return corresponding direction char
                switch (PChoice)
                {
                    case "1":
                        Direct = GetDirection(0);
                        break;

                    case "2":
                        Direct = GetDirection(1);
                        break;

                    case "3":
                        Direct = GetDirection(2);
                        break;

                    case "4":
                        Direct = GetDirection(3);
                        break;

                    default:
                        Direct = GetDirection(4);
                        break;
                }
            }

            else
            {
                // Display error message and ask player for direction again
                Console.WriteLine("Input incorret, please try again");
                PChoice = null;
                Move();
            }

            return Direct;
        }
    }
}
```

Classe `Program` que testa as classes anteriores

```cs
using System;

namespace Exercicio25
{
    public class Program
    {
        static void Main(string[] args)
        {
             //Declare block variables
            //Player variables
            Player player;
            string pName;
            string anwser;

            //Bot variables
            NPC bot;
            string bName;

            // "Gameloop"
            bool run = true;

            // Ask for names
            // Player
            Console.Write("Please insert your name:  ");
            pName = Console.ReadLine();
            player = new Player(pName);

            //Bot
            Console.Write("Please insert NPC name:  ");
            bName = Console.ReadLine();
            bot = new NPC(bName);

            // Does a loop while player doesn't exit
            while (run)
            {
                Console.WriteLine($"{player.Name.ToUpper()} to move in a " +
                    $"cardinal direction," +
                    $" input for moving:\n" +
                    $"1 for 'N',\n" +
                    $"2 for 'E',\n" +
                    $"3 for 'W'\n" +
                    $"4 for 'S'.\n" +
                    $"{bot.Name.ToUpper()} will move randomly");

                // Player moves & shows where
                player.Move();
                Console.WriteLine($"{player.Name} moving to {player.Direct}");
                Console.WriteLine();

                // Bot moves
                bot.Move();
                Console.WriteLine($"{bot.Name} moving to {bot.Direct}");
                Console.WriteLine();

                // Asks if user wants to leave
                Console.Write("Do you want to quit? Y or N?");
                anwser = Console.ReadLine();
                anwser = anwser.ToUpper();
                if (anwser == "Y")
                    run = false;

                Console.Clear();
            }
        }
    }
}
```

*Por [Miguel Fernández](https://github.com/MizuRyujin).*